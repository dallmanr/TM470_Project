<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="msapplication-tap-highlight" content="no" />
  <!--<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
    <meta http-equiv="Content-Security-Policy"> -->
  <script type="text/javascript" src="cordova.js"></script>
  <!-- jQuery -->
  <link rel="stylesheet" type="text/css" href="js/jquery-1.5.0.mobile.min.css" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="styles.css" />

  <script type="text/javascript" src="js/jquery-1.11.1.min.js" id="cordova-jquery"></script>

  <script type="text/javascript" id="jqm-trans-disable">
    /* For having a faster transition */
    $(document).on("mobileinit", function() {
      $.mobile.defaultPageTransition = "none";
      $.mobile.defaultDialogTransition = "none";
    });
  </script>
  <script type="text/javascript" src="js/jquery-1.5.0.mobile.min.js"></script>
  <script type="text/javascript" src="js/index.js"></script>
  <script type="text/javascript" src="js/driverSignOut.js"></script>


  <title>Driver sign out</title>
</head>

<body>


  <script>
    //Variables set from sign out 1 of 3
    $("#theDriversName").val(localStorage.getItem("driverName"));
    $("#driversDuty").val(localStorage.getItem("dutyNumber"));
    $("#signOutVanNumber").val(localStorage.getItem("vanNumber"));
    $("#firstPdaTaken").val(localStorage.getItem("pdaOneNum"));
    $("#secondPdaTaken").val(localStorage.getItem("pdaTwoNum"));
    $("#keysCollected").val(localStorage.getItem("keysTaken"));
    $("#logBookCollected").val(localStorage.getItem("logbook"));

    //Variables set from sign out 2 of 3
    if (localStorage.getItem("pegs") == 1) {
      //alert(localStorage.getItem("pegs"));
      $("#pegs").prop("checked", true);
    }

    if (localStorage.getItem("jacket") == 1) {
      $("#hivis").prop("checked", true);
    }

    if (localStorage.getItem("footwear") == 1) {
      $("#footwear").prop("checked", true);
    }

    if (localStorage.getItem("logbook") == 1) {
      $("#logBookCollected").prop("checked", true);
    }

    if (localStorage.getItem("collectionKeys") == 1) {
      $("#collectionKeys").prop("checked", true);
    }

    if(localStorage.getItem("collectionKeys") == 0) {
        document.getElementById("collKeyDiv").style.display = "none";
      }

    //$("#pegs").val(localStorage.getItem("pegs"));
    //$("#hivis").val(localStorage.getItem("jacket"));
    //$("#footwear").val(localStorage.getItem("footwear"));
    //alert(localStorage.getItem("driverName"));
  </script>

  <script>
    function required() {
      console.log("Required called");
      document.getElementById("acknowledge").required = true;
    }
  </script>

  <div class="container">
    <div id="user-input">
      <div class="row">
        <div class="col-sm-4">
          <form action="index.html">
            <button type="button" class="btn btn-default" aria-label="Home" onclick="app.project.returnHome();">
                <span class="glyphicon glyphicon-home" aria-hidden="true"></span>
                </button>
          </form>
        </div>
        <div class="col-sm-4">
          <h1 class="text-center">Sign van out</h1>
        </div>
        <div class="col-sm-4"></div>
      </div>

      <input type="hidden" name="redirect" value="index.html" />
      <form onsubmit="required()">
      <fieldset>
        <legend class="text-center">Sign a van out (3 of 3)</legend>
        <!-- Summary of information filled out by the staff member, before confirming their action -->
        <p>
          <strong>Name:</strong><input type="text" name="theDriversName" id="theDriversName" readonly />
          <strong>Duty number:</strong><input type="text" name="driversDuty" id="driversDuty" readonly />
          <strong>Number of keys taken:</strong> <input type="text" name="keysCollected" id="keysCollected" readonly />
          <strong>Vehicle number:</strong> <input type="text" name="signOutVanNumber" id="signOutVanNumber" readonly />
          <strong>Registration:</strong> <input type="text" name="regNumTaken" id="regNumTaken" readonly />
          <strong>Serial number:</strong> <input type="text" name="serialNumTaken" id="serialNumTaken" readonly />
          <strong>PDA 1:</strong> <input type="text" name="firstPdaTaken" id="firstPdaTaken" readonly />
          <strong>PDA 2:</strong> <input type="text" name="secondPdaTaken" id="secondPdaTaken" readonly />

          <label class="checkbox-inline">
            <input type="checkbox" name="logBookCollected" id="logBookCollected" value="1" hidden/><strong>Log book</strong></label>

          <input type="hidden" name="pegs" value="0" /><label class="checkbox-inline">
            <input type="checkbox" name="pegs" id="pegs" value="1" hidden/><strong>Posting pegs</strong></label>

          <label class="checkbox-inline"><input type="hidden" name="hivis" value="0"/>
            <input type="checkbox" name="hivis" id="hivis" value="1" hidden/><strong>Hi-vis jacket</strong></label>

          <label class="checkbox-inline"><input type="hidden" name="footwear" value="0"/>
            <input type="checkbox" name="footwear" id="footwear" value="1" hidden/><strong>Footwear</strong></label>

          <div id="collKeyDiv">
          <label class="checkbox-inline">
              <input type="hidden" name="collectionKeys" value="0" hidden/>
              <input type="checkbox" name="collectionKeys" id="collectionKeys" value="1" hidden/><strong>Collection keys</strong>
            </label>
          </div>
          <p>

            <label class="checkbox-inline required">
            <input type="hidden" name="acknowledge" id="acknowledge" value="0" hidden/>
            <input type="checkbox" name="acknowledge" id="acknowledge" value="1" hidden/>
            <i>I acknowledge the above information is correct</i></label>
          </p>
      </fieldset>
        <button id="cancelButton" class="btn btn-warning" onclick="app.project.returnHome();">Cancel</button>
        <button type="button" class="btn btn-primary"  id="submit" value="Submit" onclick="app.project.signAVanOut();">Submit</button>
      </form>
    </div>
  </div>
</body>

</html>
