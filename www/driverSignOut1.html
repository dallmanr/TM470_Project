<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="msapplication-tap-highlight" content="no" />
  <!--<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
    <meta http-equiv="Content-Security-Policy"> -->
  <script type="text/javascript" src="cordova.js"></script>
  <!-- jQuery -->
  <link rel="stylesheet" type="text/css" href="js/jquery-1.5.0.mobile.min.css" />
  <link rel="stylesheet" href="css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="styles.css" />

  <script type="text/javascript" src="js/jquery-1.11.1.min.js" id="cordova-jquery"></script>
  <script type="text/javascript" id="jqm-trans-disable">
    /* For having a faster transition */
    $(document).on("mobileinit", function() {
      $.mobile.defaultPageTransition = "none";
      $.mobile.defaultDialogTransition = "none";
    });
  </script>
  <script type="text/javascript" src="js/jquery-1.5.0.mobile.min.js"></script>
  <script type="text/javascript" src="js/index.js"></script>
  <script type="text/javascript" src="js/getVanDetails.js"></script>
  <script type="text/javascript" src="js/driverSignOut.js"></script>
  <script type="text/javascript" src="js/getDriversOnDuty.js"></script>
  <script type="text/javascript" src="js/pdaSignIn.js"></script>

  <title>Driver sign out 1 of 3</title>
</head>

<body>
  <!-- Testing the driver value -->
  <script>
    //alert(localStorage.getItem("driverName"));
  </script>
  <!-- Scripts for setting values for name of drivers, duty numbers,
  van numbers, PDA numbers, number of keys signed out, collection keys and log book -->
  <script>
    function setName(val) {
      localStorage.setItem("driverNameDriverSignOut", val);
      //console.log(localStorage.getItem("driverName"));
      //alert(val);
    }
  </script>

  <script>
    function setDuty(val) {
      //var duty = document.getElementById("dutyNumber");
      localStorage.setItem("dutyNumberDriverSignOut", val);
      //alert(val);
    }
  </script>

  <script>
    function setVan(val) {
      //var van = document.getElementById("vanNumber");
      localStorage.setItem("vanNumberDriverSignOut", val);
      //console.log(val);
      //alert(val);
    }
  </script>

  <script>
    function setPdaOne(val) {
      //var pdaOne = document.getElementById("firstPdaTaken");
      localStorage.setItem("pdaOneNumDriverSignOut", val);
      //alert(val);
    }
  </script>

  <script>
    function setPdaTwo(val) {
      //var pdaTwo = document.getElementById("secondPadTaken");
      localStorage.setItem("pdaTwoNumDriverSignOut", val);
      //alert(val);
    }
  </script>

  <script>
    function setVanKeys(val) {
      //var pdaTwo = document.getElementById("secondPadTaken");
      localStorage.setItem("keysTakenDriverSignOut", val);
      //alert(val);
    }
  </script>

  <script>
    function setCollKeys(val) {
      //var pdaTwo = document.getElementById("secondPadTaken");
      localStorage.setItem("collectionKeysDriverSignOut", val);
      //alert(val);
    }
  </script>

  <script>
    function setLogbook(val) {
      //var pdaTwo = document.getElementById("secondPadTaken");
      localStorage.setItem("logbookDriverSignOut", val);
      //alert(val);
    }
  </script>

  <script>
    function setSerial(val) {
      //var pdaTwo = document.getElementById("secondPadTaken");
      localStorage.setItem("vanSerialDriverSignOut", val);
      //alert(val);
    }
  </script>

  <script>
    function setReg(val) {
      //var pdaTwo = document.getElementById("secondPadTaken");
      localStorage.setItem("vanRegDriverSignOut", val);
      //alert(val);
    }
  </script>

  <!-- Scripts for ticking the collection keys and log book check boxes.
  If the user is returning to this screen from screen 2 or 3 to make changes, these values
  will have been set previously -->
  <script>
    if (localStorage.getItem("collectionKeysDriverSignOut") == 1) {
      //alert(localStorage.getItem("pegs"));
      $("#collectionKeysTrue").prop("checked", true);
    } else if (localStorage.getItem("collectionKeysDriverSignOut") == 0) {
      $("#collectionKeysFalse").prop("checked", true);
    }

    if (localStorage.getItem("logbookDriverSignOut") == 1) {
      //alert(localStorage.getItem("pegs"));
      $("#logBookTrue").prop("checked", true);
    } else if (localStorage.getItem("logbookDriverSignOut") == 0) {
      $("#logBookFalse").prop("checked", true);
    }
  </script>

  <div class="container">
    <div class="row">
      <div class="col-sm-4">
        <form action="index.html">
          <button type="button" class="btn btn-default" aria-label="Home" onclick="app.project.returnHome()">
          <span class="glyphicon glyphicon-home" aria-hidden="true"></span>
          </button>
        </form>
      </div>
      <div class="col-sm-4">
        <h1 class="text-center">Sign van out</h1>
      </div>
      <div class="col-sm-4"></div>
    </div>

    <!-- User Information -->
    <form>
      <div class="progress">
        <div class="progress-bar progress-bar-success progress-bar-striped active" role="progressbar" aria-valuenow="33" aria-valuemin="0" aria-valuemax="100" style="width:33%"></div>
      </div>
      <fieldset>
        <!-- A list of drivers, list contains names of those not currently out on a route for that day -->
        <!--Name: <select name="driverNames" id="driverNames" onChange="setName(this.value)"><option>Please select..</option></select>-->
        <strong>Name:</strong>
        <input list="driverNames" name="driverNames" onChange="setName(this.value)" />
        <datalist id="driverNames">
      </datalist>

        <!-- A list of duties for the staff member to select which one they are on -->
        <!--Duty: <select name="dutyNumber" id="dutyNumber" onChange="setDuty(this.value)"><option>Please select..</option></select> -->
        <strong>Duty:</strong>
        <input list="dutyNumber" name="dutyNumber" onChange="setDuty(this.value); app.project.checkIfCollectionDuty(this.value); " />
        <datalist id="dutyNumber">
      </datalist>

        <!-- List of vehicle numbers for a driver to select which one they are signing out -->
        <!-- Van number: <select name="vanNumber" id="vanNumber" onChange="setVan(this.value)"><option>Please select..</option></select> -->
        <strong>Van number:</strong>
        <input list="vanNumber" name="vanNumber" onChange="setVan(this.value); app.project.getVanSerial(); app.project.getVanReg(); app.project.getVanID();" />
        <datalist id="vanNumber">
      </datalist>

        <strong>Van serial:</strong>
        <input type="text" name="serialNumTaken" id="serialNumTaken" onChange="setSerial(this.value);" readonly/>

        <strong>Van registration</strong>
        <input type="text" name="regNumTaken" id="regNumTaken" onChange="setReg(this.value);" readonly/>

        <!-- Number of keys for the van the staff member has taken -->
        <strong>Keys taken:</strong>
        <select name="keysTaken" id="keysTaken" onChange="setVanKeys(this.value)">
         <optgroup label="Please select">
			   <option value="1">One</option>
			   <option value="2">Two</option>
       </optgroup>
			</select>

        <!-- List of PDAs for the staff member to select for signing out (1st PDA) -->
        <strong>PDA:</strong><select name="firstPdaTaken" id="firstPdaTaken" onChange="setPdaOne(this.value)"><option>Please select...</option></select>
        <strong>PDA:</strong><select name="secondPadTaken" id="secondPadTaken" onChange="setPdaTwo(this.value)"><option>Please select...</option></select>

        <div id="collectionDutiesToHide">
          <strong>Collection keys:</strong>
          <label class="radio-inline"><input type="radio" name="collectionKeys" id="collectionKeysTrue" value="Y" onchange="setCollKeys(this.value)" hidden/>Yes</label>
          <label class="radio-inline"><input type="radio" name="collectionKeys"  id="collectionKeysFalse" value="N" onchange="setCollKeys(this.value)" hidden />No</label>
        </div>

        <strong>Log book:</strong>
        <label class="radio-inline"><input type="radio" name="logBook" id="logBookTrue" value="Y" onchange="setLogbook(this.value)" hidden/>Yes</label>
        <label class="radio-inline"><input type="radio" name="logBook" id="logBookFalse" value="N" onchange="setLogbook(this.value)" hidden/>No</label>
      </fieldset>
    </form>

    <input type="button" class="btn btn-warning btn-block" id="cancelButton" value="Cancel" onclick="app.project.returnHome();" />
    <p>

      <form action="driverSignOut2.html">
        <input type="submit" class="btn btn-primary btn-block" value="Next" />
      </form>

  </div>
  <script>
    function onLoad() {
      //console.log("On load called");
      getStaffNotOnDuty();
      getDutiesNotOut();
      getVansNotOut();
      getPdasNotOut();
    }
    onLoad();
  </script>
  <script src="js/bootstrap.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</body>

</html>
